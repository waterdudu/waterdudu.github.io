<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta property="og:title" content="go tips &middot; waterdudu&#39;s blog ">
        <meta property="og:site_name" content="waterdudu&#39;s blog"/>
        <meta property="og:description" content="dudu&#39;s Site">
        <meta property="og:url" content="http://waterdudu.github.io/post/go-tips/" />
        <meta property="og:locale" content="en-us">
        <meta name="author" content="">
        <meta name="description" content="dudu&#39;s Site">
        <meta name="keywords" content="">
        <meta name="generator" content="Hugo 0.15" />
        <link rel="icon" href="http://waterdudu.github.io/assets/favicon.ico" type="image/x-icon"> 
        <link rel="stylesheet" href="http://waterdudu.github.io/css/slender-base.css">
        <link rel="stylesheet" href="http://waterdudu.github.io/css/slender-color-schemes.css">
        <link rel="stylesheet" href="http://waterdudu.github.io/css/font-awesome-4.5.0.min.css">
        <link rel="stylesheet" href="http://waterdudu.github.io/css/highlight-9.0.0-default.min.css">
        <title>
            
                go tips &middot; waterdudu&#39;s blog
            
        </title>
    </head>
    <body class="color-scheme-white">
        <div class="container">
            <header>
                <nav>
                    <ul></ul>
                </nav>
                
                    <h1 class="title">go tips</h1>
                    <aside>
                        <p>on <strong>Mon, Jan 18, 2016</strong></p>
                    </aside>
                
            </header>
<article class="article-content">
    

<h3 id="资源:a2653e2feb85ac0f67b04a4d51202bc4">资源</h3>

<ul>
<li><a href="https://github.com/golang/go/wiki/">github.com/golang/go/wiki</a></li>
<li><a href="https://golang.org/doc/faq">go faq</a></li>
<li><a href="http://www.golangbootcamp.com/book/">golang bootcamp</a></li>
<li><a href="http://go-database-sql.org/">go database-sql</a></li>
<li><a href="https://golang.org/doc/effective_go.html">effective go</a></li>
</ul>

<h3 id="访问-map-的-key-value:a2653e2feb85ac0f67b04a4d51202bc4">访问 map 的 key, value</h3>

<pre><code>x := map[string]string{
    &quot;name&quot;: &quot;dudu&quot;,
    &quot;love&quot;: &quot;many&quot;,
}

if _, ok := x[&quot;love&quot;]; !ok {
    fmt.Println(&quot;a person with no love&quot;)
}
</code></pre>

<h3 id="修改-string-时-转换成-slice:a2653e2feb85ac0f67b04a4d51202bc4">修改 string 时，转换成 slice</h3>

<pre><code>x := &quot;strings are read-only&quot;
xbytes := []byte(x)
xbytes[0] = 'S'

fmt.Println(string(xbytes))
</code></pre>

<h3 id="以下调用合法:a2653e2feb85ac0f67b04a4d51202bc4">以下调用合法</h3>

<ul>
<li>调用 pointer receiver method，只要调用者是 pointer type，或者它能被取地址（&amp;）</li>
<li>调用 value recieiver method，只要调用者是 value type，或者它的 value 可以被取值（*）</li>
</ul>

<p>The rule about pointers vs. values for receivers is that value methods can be invoked on pointers and values, but pointer methods can only be invoked on pointers.</p>

<pre><code>type List [] int

func (l List) Len() int { return len(l) }
func (l *List) Append(val int) { *l = append(*l, val) }

// call
var list List
list.Append(l)
fmt.Printf(&quot;%v (len: %d) \n&quot;, list, list.Len())

pList := new(List)
pList.Append(2)
fmt.Printf(&quot;%v (len: %d) \n&quot;, pList, pList.Len())

</code></pre>

<h3 id="for-range-string:a2653e2feb85ac0f67b04a4d51202bc4">for range string</h3>

<p>for range 默认会把 string 当作 utf-8 字符，如果不能解析，则返回 0xfffd。
需要把它转换成 byte slice 让结果正确。</p>

<pre><code>data := &quot;A\xfe\x02\xff\x04&quot;
for _,v := range data {
    fmt.Printf(&quot;%#x &quot;,v)
}
//prints: 0x41 0xfffd 0x2 0xfffd 0x4 (not ok)

fmt.Println()
for _,v := range []byte(data) {
    fmt.Printf(&quot;%#x &quot;,v)
}
//prints: 0x41 0xfe 0x2 0xff 0x4 (good)
</code></pre>

<h3 id="for-range-map-随机:a2653e2feb85ac0f67b04a4d51202bc4">for range map 随机</h3>

<pre><code>m := map[string]int{&quot;one&quot;: 1, &quot;two&quot;: 2, &quot;three&quot;: 3, &quot;four&quot;: 4}
for k, v := range m {
    fmt.Println(k, v)
}

// first time run

// [ run | done: 9.628665ms ]
//  one 1
//  two 2
//  three 3
//  four 4


// second time run

// [ run | done: 8.847101ms ]
//  three 3
//  four 4
//  one 1
//  two 2
</code></pre>

<h3 id="switch:a2653e2feb85ac0f67b04a4d51202bc4">switch</h3>

<p>switch 默认是 fallthrough 的，可以在 case 语句里写成 list，或者使用 fallthrough 语句</p>

<pre><code class="language-go">isSpace := func(ch byte) bool {
    switch(ch) {
    case ' ', '\t':
        return true
    }
    return false
}
</code></pre>

</article>
        </div>
        <footer>
            <p>Copyright 2015 &copy; waterdudu</p>
        </footer>
        <script src="http://waterdudu.github.io/js/highlight-9.0.0.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        
    </body>
</html>